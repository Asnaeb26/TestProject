# Документация

+ Пользователь проходит по адресу:
`api/messages/`

+ Перед пользователем представлены все его тикеты (если они существуют)
+ В поле Content пишется сообщение вида `{"text": " < сообщение > "}`
    + Если тикета от данного пользователя
      **не существует**, **ИЛИ!** существующий тикет с одним из двух статусов ("resolved" или "freezy"), то создается **
      новый** тикет, со статусом "unresolved", в который помещается данное сообщение.

    + Если тикет от данного пользователя **существует**, а статус этого тикета "unresolved", то сообщение помещается в
      тикет с `id` последнего тикета от данного пользователя
      (Предполагается, что может существовать только один тикет со статусом "unresolved")
    + В случае успеха сообщение записывается в базу данных и выводится сообщение -
      `{'message': 'Successful new message'}` с HTTP status 201
    + Если сообщение не введено - выводится сообщение `{"message": "Message is empty"}`
      со статусом 400
    + **ВАЖНО!** по данному эндпоинту админ не может писать сообщения, тк он создание тикетов не предусмотрено
      администратором. В этом случае выведется сообщение -
      `{"message": "Admin user cannot create a ticket"}` со статусом 400.
    + Для того, чтобы админу ответить на сообщения пользователей, нужно пройти в необходимый тикет (см. пункт ниже)

+ Для того, чтобы открыть необходимый тикет с сообщениями, предусмотрен следующий эндпоинт:`api/messages/<int:pk>`,
где`pk` - id необходимого тикета.
  + При вводе в эндпоинт несуществующий id тикета, выводится сообщение `{'message': 'No ticket with id = id'}` 
  со статусом 400
  + При вводе существующего id тикета загрузится страница с сообщениями только данного тикета
  + В поле Content пишется сообщение вида `{"text": " < сообщение > "}`
  + В случае успеха сообщение записывается в базу данных и выводится сообщение -
      `{'message': 'Successful new message'}` с HTTP статусом 201
  + Если сообщение не введено - выводится сообщение `{"message": "Message is empty"}`
      со статусом 400
  + После каждого ответа от администратора, пользователю на электронное письмо приходит уведомление
    (Предполагается, что email пользователя будет обязательным при его регистрации)
  
    **ВАЖНО** Для проверки работоспособности таска с эл.адресом необходимо прописать эл.адрес и пароль от почты,
  с которой пользователям будет отсылаться эл.письмо в `settings.py`
  + Администратор может менять статус таска ('unresolved', 'freezy', 'resolved'). Прописав в поле Content сообщение
  типа `{"status":" <new status> "}` с http статусом 200
  + Если статус будет иным (не указанным в модели Ticket), то будет выведена ошибка `{'message': 'Wrong status'}`
  со статусом - 400
  + При успешном изменении статуса тикета будет выведено сообщение `{'message': 'Update complete'}` 
  с http статусом 200
  + Программой не подразумевается удаление сообщения или тикета


Полезные команды `sudo chown -R $USER <path-to-folder>`

  